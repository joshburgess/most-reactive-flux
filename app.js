webpackJsonp([1],{0:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c,i,l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=n(128),s=r(f),d=n(207),E=n(76),p=n(129),b=r(p),y=n(130),N=r(y),O=n(69),h=n(68),m=(0,b["default"])(N["default"],new Promise(function(t){setTimeout(t.bind(t,(0,E.Map)({counter:42,history:(0,E.List)(),future:(0,E.List)()})),500)})),R=(c=(0,O.streamable)(m),c(i=function(t){function e(){return u(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),l(e,[{key:"render",value:function(){var t=this.props,e=t.dispatch,n=t.data;return s["default"].createElement("div",null,n&&s["default"].createElement("div",null,s["default"].createElement("div",null,s["default"].createElement("button",{disabled:n.get("history").size<1,className:"btn btn-success",onClick:function(){return e(h.UNDO_COUNTER)}},"Undo")," ",s["default"].createElement("button",{disabled:n.get("future").size<1,className:"btn btn-success",onClick:function(){return e(h.REDO_COUNTER)}},"Redo")," ",s["default"].createElement("div",{className:"btn btn-success",onClick:function(){return e(h.REMOVE_HISTORY)}},"Clear history")),s["default"].createElement("br",null),s["default"].createElement("button",{className:"btn btn-danger",onClick:function(){return e.apply(void 0,[h.DECREMENT_MANY_COUNTER].concat([1,2]))}},"Click -1 and -2")," ",s["default"].createElement("button",{className:"btn btn-danger",onClick:function(){return e(h.DECREMENT_COUNTER,1)}},"Click -1")," ",s["default"].createElement("span",null,n?n.get("counter"):0)," ",s["default"].createElement("button",{className:"btn btn-info",onClick:function(){return e(h.INCREMENT_COUNTER,1)}},"Click +1")," ",s["default"].createElement("button",{className:"btn btn-info",onClick:function(){return e.apply(void 0,[h.INCREMENT_MANY_COUNTER].concat([1,2]))}},"Click +1 and +2")," ",s["default"].createElement("button",{className:"btn btn-success",onClick:function(){return e(h.RESET_COUNTER)}},"Reset")))}}]),e}(f.Component))||i),_=function(t){function e(){return u(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),l(e,[{key:"render",value:function(){return s["default"].createElement("div",null,s["default"].createElement(R,null),s["default"].createElement("br",null),s["default"].createElement(R,null),s["default"].createElement("br",null),s["default"].createElement(R,null),s["default"].createElement("br",null),s["default"].createElement(R,null))}}]),e}(f.Component);(0,d.render)(s["default"].createElement(_,null),document.getElementById("app"))},68:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.INCREMENT_COUNTER="INCREMENT_COUNTER",e.INCREMENT_MANY_COUNTER="INCREMENT_MANY_COUNTER",e.DECREMENT_COUNTER="DECREMENT_COUNTER",e.DECREMENT_MANY_COUNTER="DECREMENT_MANY_COUNTER",e.RESET_COUNTER="RESET_COUNTER",e.UNDO_COUNTER="UNDO_COUNTER",e.REDO_COUNTER="REDO_COUNTER",e.REMOVE_HISTORY="REMOVE_HISTORY"},69:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.streamable=e.update=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=n(37),s=r(f),d=n(128),E=r(d);s["default"].Stream.prototype.let=function(t){return t(this)};var p=function(t,e){var n=e.filter(function(t,e){return e%2===0}),r=e.filter(function(t,e){return e%2!==0});return(0,f.mergeArray)(n.map(function(t,e){return Array.isArray(t)?f.zip.apply(void 0,[function(){for(var t=arguments.length,n=Array(t),u=0;t>u;u++)n[u]=arguments[u];return function(t){return r[e].apply(r,[t].concat(n))}}].concat(c(t))):t.map(function(t){return function(n){return r[e].apply(r,[n].concat(c(t)))}})})).scan(function(t,e){return e(t)},t).multicast()},b=function(t){var e=arguments.length<=1||void 0===arguments[1]?function(t){return t}:arguments[1];return function(n){return function(r){function c(t){return u(this,c),o(this,Object.getPrototypeOf(c).call(this,t))}return a(c,r),l(c,[{key:"componentWillMount",value:function(){var n=this;t.getStream().let(e).observe(function(t){n.setState({data:t})})}},{key:"render",value:function(){return E["default"].createElement(n,i({},this.state,{dispatch:t.dispatch}))}}]),c}(d.Component)}};e.update=p,e.streamable=b},129:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){var n=[],r=!0,u=!1,o=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(i){u=!0,o=i}finally{try{!r&&c["return"]&&c["return"]()}finally{if(u)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(190),a=r(o),c=n(99),i=r(c),l=n(200),f=r(l),s=n(191),d=r(s),E=n(199),p=r(E),b=n(202),y=r(b),N=n(192),O=r(N),h=n(98),m=r(h),R=n(187),_=r(R),C=n(37),T=n(147),v=n(69);e["default"]=function(t,e){var n=(0,a["default"])((0,i["default"])(function(t,e){return t.set(e,(0,T.holdSubject)())},new Map),f["default"])(t),r=(0,i["default"])(function(e,n){var r=u(n,2),o=r[0],a=r[1],c=(a.observer,a.stream);return e.concat(c,t[o])},[],n),o=(0,d["default"])([[(0,a["default"])((0,p["default"])(Function),(0,y["default"])("then")),C.fromPromise],[(0,a["default"])((0,p["default"])(Function),(0,y["default"])("observe")),O["default"]],[m["default"],C.from],[_["default"],C.of]])(e);return{getStream:function(){return o.concatMap(function(t){return(0,v.update)(t,r)})},dispatch:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),u=1;e>u;u++)r[u-1]=arguments[u];return n.get(t).observer.next(r)}}}},130:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(188),c=(r(a),n(205)),i=(r(c),n(91)),l=(r(i),n(76)),f=n(68);e["default"]=(o={},u(o,f.DECREMENT_MANY_COUNTER,function(t,e,n){return t=t.update("history",function(e){return e.push(t.get("counter"))}),t=t.update("counter",function(t){return t-e-n})}),u(o,f.DECREMENT_COUNTER,function(t,e){return t=t.update("history",function(e){return e.push(t.get("counter"))}),t=t.update("counter",function(t){return t-e})}),u(o,f.INCREMENT_COUNTER,function(t,e){return t=t.update("history",function(e){return e.push(t.get("counter"))}),t=t.update("counter",function(t){return t+e})}),u(o,f.INCREMENT_MANY_COUNTER,function(t,e,n){return t=t.update("history",function(e){return e.push(t.get("counter"))}),t=t.update("counter",function(t){return t+e+n})}),u(o,f.RESET_COUNTER,function(t){return t=t.update("history",function(e){return e.push(t.get("counter"))}),t=t.set("counter",0)}),u(o,f.UNDO_COUNTER,function(t){if(t.get("history").size<1)return t;var e=t.get("history").last();return t=t.update("history",function(t){return t.pop()}),t=t.update("future",function(e){return e.push(t.get("counter"))}),t.set("counter",e)}),u(o,f.REDO_COUNTER,function(t){if(t.get("future").size<1)return t;var e=t.get("future").last();return t=t.update("history",function(e){return e.push(t.get("counter"))}),t=t.update("future",function(t){return t.pop()}),t.set("counter",e)}),u(o,f.REMOVE_HISTORY,function(t){return t=t.set("history",(0,l.List)()),t=t.set("future",(0,l.List)())}),o)}});